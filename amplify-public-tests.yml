version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Starting build for public-tests on $(date)"
        - echo "Node.js version $(node --version)"
        - echo "npm version $(npm --version)"
        - cd public-tests
        - npm ci
        - echo "Dependencies installed for public-tests"
    build:
      commands:
        - echo "Starting Vite build for public-tests..."
        - npm run build
        - echo "Vite build completed successfully"
        - echo "Build artifacts:"
        - ls -la dist/
    postBuild:
      commands:
        - echo "Build completed for public-tests"
        - echo "Final artifacts:"
        - find dist/ -type f | head -10
  artifacts:
    baseDirectory: public-tests/dist
    files:
      - '**/*'
  cache:
    paths:
      - public-tests/node_modules/**/*
