# Variables de entorno para serverless.yml

NODE_ENV: ${self:provider.stage}
STAGE: ${self:provider.stage}
SERVICE_NAME: ${self:service}
AWS_NODEJS_CONNECTION_REUSE_ENABLED: 1
APP_REGION: ${self:provider.region}
API_ENDPOINT:
  Fn::Join:
    - ""
    - - "https://"
      - Ref: "ApiGatewayRestApi"
      - ".execute-api.${self:provider.region}.amazonaws.com/${self:provider.stage}"
WEBSOCKET_ENDPOINT:
  Fn::Join:
    - ""
    - - "wss://"
      - Ref: "WebsocketsApi"
      - ".execute-api.${self:provider.region}.amazonaws.com/${self:provider.stage}"
WEBSOCKET_API_ENDPOINT:
  Fn::Join:
    - ""
    - - "https://"
      - Ref: "WebsocketsApi"
      - ".execute-api.${self:provider.region}.amazonaws.com/${self:provider.stage}"
USER_TABLE: ${self:custom.usersTableName}
DYNAMODB_TABLE: ${self:custom.tableName}
PARTICIPANT_TABLE: ${self:service}-participants-${self:provider.stage}
MODULE_RESPONSES_TABLE: ${self:service}-module-responses-${self:provider.stage}
QUOTA_RECORDS_TABLE: ${self:service}-quota-records-${self:provider.stage}
EDUCATIONAL_CONTENT_TABLE: ${self:service}-educational-content-${self:provider.stage}
JWT_SECRET: ${env:JWT_SECRET, 'mi-clave-secreta-para-firmar-tokens'}
TOKEN_EXPIRATION: '604800'
S3_BUCKET_NAME: ${self:custom.s3BucketName}
EYETRACKING_RECRUIT_CONFIG_TABLE: ${self:custom.eyeTrackingRecruitConfigTable}
EYETRACKING_RECRUIT_PARTICIPANT_TABLE: ${self:custom.eyeTrackingRecruitParticipantTable}
RECRUITMENT_LINK_TABLE: ${self:custom.recruitmentLinkTable}
EMAIL_FROM: process.env.EMAIL_FROM
EMAIL_TO: process.env.EMAIL_TO
TABLE_NAME: ${self:custom.tableName}
ALLOWED_ORIGIN: ${env:ALLOWED_ORIGIN, '*'} # Permitir cualquier origen por defecto para dev

# Location Tracking
LOCATION_TRACKING_TABLE: ${self:service}-location-tracking-${self:provider.stage}

# IAT (Implicit Association Test) Tables
IAT_TEST_CONFIG_TABLE: ${self:service}-iat-test-configs-${self:provider.stage}
IAT_SESSION_TABLE: ${self:service}-iat-sessions-${self:provider.stage}
IAT_RESULTS_TABLE: ${self:service}-iat-results-${self:provider.stage}
IAT_ANALYSIS_TABLE: ${self:service}-iat-analysis-${self:provider.stage}
IAT_INTEGRATION_TABLE: ${self:service}-iat-integration-${self:provider.stage}

# Eye Tracking (TheEyeTribe) Tables
EYE_TRACKING_SESSIONS_TABLE: ${self:service}-eye-tracking-sessions-${self:provider.stage}
EYE_TRACKING_ANALYSES_TABLE: ${self:service}-eye-tracking-analyses-${self:provider.stage}
IAT_EYE_TRACKING_CONFIGS_TABLE: ${self:service}-iat-eye-tracking-configs-${self:provider.stage}
IAT_EYE_TRACKING_RESULTS_TABLE: ${self:service}-iat-eye-tracking-results-${self:provider.stage}

# Public Tests URL (Local dev vs Production)
PUBLIC_TESTS_URL: ${env:PUBLIC_TESTS_URL, 'http://localhost:4700'}
