# Bucket S3 para almacenamiento - Comentado porque ya existe y no puede ser gestionado por CloudFormation
# StorageBucket:
#   Type: AWS::S3::Bucket
#   Properties:
#     BucketName: ${self:custom.s3BucketName}
#     CorsConfiguration:
#       CorsRules:
#         - AllowedHeaders:
#             - '*'
#           AllowedMethods:
#             - GET
#             - PUT
#             - POST
#             - DELETE
#             - HEAD
#           AllowedOrigins:
#             - 'http://localhost:3000'        # Frontend desarrollo
#             - 'http://localhost:4700'        # Public-tests desarrollo
#             - 'http://localhost:5173'        # Vite alternativo
#             - 'http://localhost:5174'        # Vite alternativo
#             - 'https://d26ykfabt39qmf.cloudfront.net'  # Frontend CloudFront
#             - 'https://d35071761848hm.cloudfront.net'  # Public-tests CloudFront
#             - 'http://54.90.132.233:3000'    # Frontend EC2
#             - '*'                            # Fallback para desarrollo
#           MaxAge: 3000
#     PublicAccessBlockConfiguration:
#       BlockPublicAcls: false
#       BlockPublicPolicy: false
#       IgnorePublicAcls: false
#       RestrictPublicBuckets: false

# Tabla de usuarios (creada condicionalmente)
UsersTable:
  Type: AWS::DynamoDB::Table
  Condition: CreateUsersTable
  Properties:
    TableName: ${self:provider.environment.USER_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: id
        AttributeType: S
      - AttributeName: email
        AttributeType: S
    KeySchema:
      - AttributeName: id
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: EmailIndex
        KeySchema:
          - AttributeName: email
            KeyType: HASH
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb
# 
# Tabla principal DynamoDB (comentada porque ya existe)
# # DynamoDBTable:
#   Type: AWS::DynamoDB::Table
#   Properties:
#     TableName: ${self:provider.environment.DYNAMODB_TABLE}
#     BillingMode: PAY_PER_REQUEST
#     AttributeDefinitions:
#       - AttributeName: id
#         AttributeType: S
#       - AttributeName: sk
#         AttributeType: S
#       - AttributeName: userId
#         AttributeType: S
#       - AttributeName: researchId
#         AttributeType: S
#       - AttributeName: EntityType
#         AttributeType: S
#     KeySchema:
#       - AttributeName: id
#         KeyType: HASH
#       - AttributeName: sk
#         KeyType: RANGE
#     GlobalSecondaryIndexes:
#       - IndexName: userId-index
#         KeySchema:
#           - AttributeName: userId
#             KeyType: HASH
#         Projection:
#           ProjectionType: ALL
# 
#       - IndexName: researchId-index
#         KeySchema:
#           - AttributeName: researchId
#             KeyType: HASH
#         Projection:
#           ProjectionType: ALL
# 
#       - IndexName: EntityTypeSkIndex
#         KeySchema:
#           - AttributeName: EntityType
#             KeyType: HASH
#           - AttributeName: sk
#             KeyType: RANGE
#         Projection:
#           ProjectionType: ALL
# 
#     PointInTimeRecoverySpecification:
#       PointInTimeRecoveryEnabled: true
#     SSESpecification:
#       SSEEnabled: true
#       SSEType: KMS
#       KMSMasterKeyId: alias/aws/dynamodb
# 
# Tabla EyeTracking Recruit Config
EyeTrackingRecruitConfigTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.EYETRACKING_RECRUIT_CONFIG_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: PK
        AttributeType: S
      - AttributeName: SK
        AttributeType: S
      - AttributeName: GSI1PK
        AttributeType: S
      - AttributeName: GSI1SK
        AttributeType: S
    KeySchema:
      - AttributeName: PK
        KeyType: HASH
      - AttributeName: SK
        KeyType: RANGE
    GlobalSecondaryIndexes:
      - IndexName: GSI1
        KeySchema:
          - AttributeName: GSI1PK
            KeyType: HASH
          - AttributeName: GSI1SK
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla EyeTracking Recruit Participant
EyeTrackingRecruitParticipantTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.EYETRACKING_RECRUIT_PARTICIPANT_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: PK
        AttributeType: S
      - AttributeName: SK
        AttributeType: S
      - AttributeName: GSI1PK
        AttributeType: S
      - AttributeName: GSI1SK
        AttributeType: S
      - AttributeName: GSI2PK
        AttributeType: S
      - AttributeName: GSI2SK
        AttributeType: S
    KeySchema:
      - AttributeName: PK
        KeyType: HASH
      - AttributeName: SK
        KeyType: RANGE
    GlobalSecondaryIndexes:
      - IndexName: GSI1
        KeySchema:
          - AttributeName: GSI1PK
            KeyType: HASH
          - AttributeName: GSI1SK
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: GSI2
        KeySchema:
          - AttributeName: GSI2PK
            KeyType: HASH
          - AttributeName: GSI2SK
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla Recruitment Link
RecruitmentLinkTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.RECRUITMENT_LINK_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: PK
        AttributeType: S
      - AttributeName: SK
        AttributeType: S
      - AttributeName: GSI1PK
        AttributeType: S
      - AttributeName: GSI1SK
        AttributeType: S
      - AttributeName: token
        AttributeType: S
    KeySchema:
      - AttributeName: PK
        KeyType: HASH
      - AttributeName: SK
        KeyType: RANGE
    GlobalSecondaryIndexes:
      - IndexName: GSI1
        KeySchema:
          - AttributeName: GSI1PK
            KeyType: HASH
          - AttributeName: GSI1SK
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: TokenIndex
        KeySchema:
          - AttributeName: token
            KeyType: HASH
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla de participantes
ParticipantTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.PARTICIPANT_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: id
        AttributeType: S
      - AttributeName: email
        AttributeType: S
    KeySchema:
      - AttributeName: id
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: EmailIndex
        KeySchema:
          - AttributeName: email
            KeyType: HASH
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb
    StreamSpecification:
      StreamViewType: NEW_AND_OLD_IMAGES

# Tabla para las Respuestas de M√≥dulos
ModuleResponsesTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.MODULE_RESPONSES_TABLE} # Usa la variable de entorno
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: id            # Clave primaria de la tabla (ej. UUID para el documento de respuestas del participante)
        AttributeType: S
      - AttributeName: researchId    # Para el GSI ResearchParticipantIndex y ResearchIndex (Clave de Partici√≥n)
        AttributeType: S
      - AttributeName: participantId # Para el GSI ResearchParticipantIndex (Clave de Ordenaci√≥n)
        AttributeType: S
    KeySchema:
      - AttributeName: id
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: ResearchParticipantIndex # El √≠ndice que est√°s usando en findByResearchAndParticipant
        KeySchema:
          - AttributeName: researchId
            KeyType: HASH
          - AttributeName: participantId
            KeyType: RANGE
        Projection:
          ProjectionType: ALL # Proyecta todos los atributos al √≠ndice
      - IndexName: ResearchIndex # El √≠ndice que usas en getResponsesByResearch
        KeySchema:
          - AttributeName: researchId
            KeyType: HASH
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb
    StreamSpecification:
      StreamViewType: NEW_AND_OLD_IMAGES

# Permite acceso p√∫blico de solo lectura a todos los archivos del bucket
# COMENTADO: No se puede aplicar pol√≠tica sin actualizar primero las configuraciones del bucket existente
# S3PublicReadPolicy:
#   Type: AWS::S3::BucketPolicy
#   Properties:
#     Bucket: ${self:custom.s3BucketName}
#     PolicyDocument:
#       Version: "2012-10-17"
#       Statement:
#         - Sid: AllowPublicReadForAllFiles
#           Effect: Allow
#           Principal: "*"
#           Action: "s3:GetObject"
#           Resource: "arn:aws:s3:::${self:custom.s3BucketName}/*"

# Tabla para Location Tracking
LocationTrackingTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.LOCATION_TRACKING_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: id
        AttributeType: S
      - AttributeName: researchId
        AttributeType: S
    KeySchema:
      - AttributeName: id
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: ResearchIdIndex
        KeySchema:
          - AttributeName: researchId
            KeyType: HASH
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla para Quota Records
QuotaRecordsTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.QUOTA_RECORDS_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: id
        AttributeType: S
      - AttributeName: researchId
        AttributeType: S
    KeySchema:
      - AttributeName: id
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: ResearchIdIndex
        KeySchema:
          - AttributeName: researchId
            KeyType: HASH
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla Educational Content
EducationalContentTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.EDUCATIONAL_CONTENT_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: id
        AttributeType: S
      - AttributeName: userId
        AttributeType: S
      - AttributeName: contentType
        AttributeType: S
    KeySchema:
      - AttributeName: id
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: UserIdIndex
        KeySchema:
          - AttributeName: userId
            KeyType: HASH
        Projection:
          ProjectionType: ALL
      - IndexName: UserContentTypeIndex
        KeySchema:
          - AttributeName: userId
            KeyType: HASH
          - AttributeName: contentType
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# ======================================================================
# üéØ TABLAS IAT (Implicit Association Test)
# ======================================================================

# Tabla para configuraciones de prueba IAT
IATTestConfigTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.IAT_TEST_CONFIG_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: id
        AttributeType: S
      - AttributeName: createdBy
        AttributeType: S
      - AttributeName: status
        AttributeType: S
      - AttributeName: createdAt
        AttributeType: S
    KeySchema:
      - AttributeName: id
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: CreatedByIndex
        KeySchema:
          - AttributeName: createdBy
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: StatusIndex
        KeySchema:
          - AttributeName: status
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla para sesiones IAT
IATSessionTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.IAT_SESSION_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: sessionId
        AttributeType: S
      - AttributeName: participantId
        AttributeType: S
      - AttributeName: testId
        AttributeType: S
      - AttributeName: status
        AttributeType: S
      - AttributeName: createdAt
        AttributeType: S
    KeySchema:
      - AttributeName: sessionId
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: ParticipantIndex
        KeySchema:
          - AttributeName: participantId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: TestIndex
        KeySchema:
          - AttributeName: testId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: StatusIndex
        KeySchema:
          - AttributeName: status
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla para resultados IAT
IATResultsTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.IAT_RESULTS_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: resultId
        AttributeType: S
      - AttributeName: participantId
        AttributeType: S
      - AttributeName: testId
        AttributeType: S
      - AttributeName: sessionId
        AttributeType: S
      - AttributeName: completedAt
        AttributeType: S
    KeySchema:
      - AttributeName: resultId
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: ParticipantIndex
        KeySchema:
          - AttributeName: participantId
            KeyType: HASH
          - AttributeName: completedAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: TestIndex
        KeySchema:
          - AttributeName: testId
            KeyType: HASH
          - AttributeName: completedAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: SessionIndex
        KeySchema:
          - AttributeName: sessionId
            KeyType: HASH
          - AttributeName: completedAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla para an√°lisis estad√≠stico IAT
IATStatisticalAnalysisTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.IAT_ANALYSIS_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: analysisId
        AttributeType: S
      - AttributeName: resultId
        AttributeType: S
      - AttributeName: participantId
        AttributeType: S
      - AttributeName: testId
        AttributeType: S
      - AttributeName: createdAt
        AttributeType: S
    KeySchema:
      - AttributeName: analysisId
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: ResultIndex
        KeySchema:
          - AttributeName: resultId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: ParticipantIndex
        KeySchema:
          - AttributeName: participantId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: TestIndex
        KeySchema:
          - AttributeName: testId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla para integraci√≥n emocional IAT
IATEmotionalIntegrationTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.IAT_INTEGRATION_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: integrationId
        AttributeType: S
      - AttributeName: resultId
        AttributeType: S
      - AttributeName: participantId
        AttributeType: S
      - AttributeName: createdAt
        AttributeType: S
    KeySchema:
      - AttributeName: integrationId
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: ResultIndex
        KeySchema:
          - AttributeName: resultId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: ParticipantIndex
        KeySchema:
          - AttributeName: participantId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# ======================================================================
# üëÅÔ∏è TABLAS EYE TRACKING (TheEyeTribe Integration)
# ======================================================================

# Tabla para sesiones de eye tracking
EyeTrackingSessionsTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.EYE_TRACKING_SESSIONS_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: sessionId
        AttributeType: S
      - AttributeName: participantId
        AttributeType: S
      - AttributeName: startTime
        AttributeType: S
    KeySchema:
      - AttributeName: sessionId
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: participant-index
        KeySchema:
          - AttributeName: participantId
            KeyType: HASH
          - AttributeName: startTime
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla para an√°lisis de eye tracking
EyeTrackingAnalysesTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.EYE_TRACKING_ANALYSES_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: analysisId
        AttributeType: S
      - AttributeName: sessionId
        AttributeType: S
      - AttributeName: participantId
        AttributeType: S
    KeySchema:
      - AttributeName: analysisId
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: session-index
        KeySchema:
          - AttributeName: sessionId
            KeyType: HASH
        Projection:
          ProjectionType: ALL
      - IndexName: participant-index
        KeySchema:
          - AttributeName: participantId
            KeyType: HASH
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla para configuraciones IAT + Eye Tracking
IATEyeTrackingConfigsTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.IAT_EYE_TRACKING_CONFIGS_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: testId
        AttributeType: S
      - AttributeName: name
        AttributeType: S
    KeySchema:
      - AttributeName: testId
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: name-index
        KeySchema:
          - AttributeName: name
            KeyType: HASH
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# Tabla para resultados combinados IAT + Eye Tracking
IATEyeTrackingResultsTable:
  Type: AWS::DynamoDB::Table
  Properties:
    TableName: ${self:provider.environment.IAT_EYE_TRACKING_RESULTS_TABLE}
    BillingMode: PAY_PER_REQUEST
    AttributeDefinitions:
      - AttributeName: sessionId
        AttributeType: S
      - AttributeName: participantId
        AttributeType: S
      - AttributeName: testId
        AttributeType: S
      - AttributeName: createdAt
        AttributeType: S
    KeySchema:
      - AttributeName: sessionId
        KeyType: HASH
    GlobalSecondaryIndexes:
      - IndexName: participant-index
        KeySchema:
          - AttributeName: participantId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
      - IndexName: test-index
        KeySchema:
          - AttributeName: testId
            KeyType: HASH
          - AttributeName: createdAt
            KeyType: RANGE
        Projection:
          ProjectionType: ALL
    PointInTimeRecoverySpecification:
      PointInTimeRecoveryEnabled: true
    SSESpecification:
      SSEEnabled: true
      SSEType: KMS
      KMSMasterKeyId: alias/aws/dynamodb

# --- Fin de las definiciones de Recursos ---
